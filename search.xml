<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Introduction to Kubernetes - Vietnamese</title>
    <url>/2020/06/26/kubernetes-overview/</url>
    <content><![CDATA[<p>Welcome to <a href="https://thanhbangoc.github.io/" target="_blank" rel="noopener">Thanhâ€™s Blogs</a>! This is my post for Introduction to Kubernetes . Check document bellow for more info. If you get any problems when using document, you can find the answer in <a href="https://www.linkedin.com/in/thanhbangoc/" target="_blank" rel="noopener">Linkedin</a> or you can ask me on <a href="mailto:thanhbangoc@gmail.com">Email</a>.</p>
<h2 id="Tong-quan-ve-Kubernetes"><a href="#Tong-quan-ve-Kubernetes" class="headerlink" title="Tá»•ng quan vá» Kubernetes"></a>Tá»•ng quan vá» Kubernetes</h2><p>Kubernetes (cÃ²n gá»i lÃ  k8s) lÃ  mÃ£ nguá»“n má»Ÿ, má»™t há»‡ thá»‘ng Ä‘á»ƒ tá»± Ä‘á»™ng triá»ƒn khai há»‡ thá»‘ng, quáº£n lÃ½, Ä‘iá»u phá»‘i cÃ¡c á»©ng dá»¥ng Ä‘Æ°á»£c container hÃ³a trÃªn má»™t cá»¥m mÃ¡y (1 hay nhiá»u) gá»i lÃ  cluster. NÃ³ thá»±c sá»± lÃ  má»™t há»‡ thá»‘ng máº¡nh máº½, Ä‘Æ°á»£c phÃ¡t triá»ƒn bá»Ÿi Google. Vá»›i Kubernetes báº¡n cÃ³ thá»ƒ cáº¥u hÃ¬nh Ä‘á»ƒ cháº¡y cÃ¡c á»©ng dá»¥ng, dá»‹ch vá»¥ sao cho phÃ¹ há»£p nháº¥t khi chÃºng tÆ°Æ¡ng tÃ¡c vá»›i nhau cÅ©ng nhÆ° vá»›i bÃªn ngoÃ i. Báº¡n cÃ³ thá»ƒ Ä‘iá»u chá»‰nh tÄƒng giáº£m tÃ i nguyÃªn, báº£n cháº¡y phá»¥c vá»¥ cho dá»‹ch vá»¥ (scale), báº¡n cÃ³ thá»ƒ cáº­p nháº­t (update), thu há»“i update khi cÃ³ váº¥n Ä‘á» â€¦ Kubernetes lÃ  má»™t cÃ´ng cá»¥ máº¡nh máº½, má»m dáº»o, dá»… má»Ÿ rá»™ng khi so sÃ¡nh nÃ³ vá»›i cÃ´ng cá»¥ tÆ°Æ¡ng tá»± lÃ  Docker Swarm!</p>
<h2 id="So-luoc-kien-truc-cac-thanh-phan-cua-Kubernetes"><a href="#So-luoc-kien-truc-cac-thanh-phan-cua-Kubernetes" class="headerlink" title="SÆ¡ lÆ°á»£c kiáº¿n trÃºc - cÃ¡c thÃ nh pháº§n cá»§a Kubernetes"></a>SÆ¡ lÆ°á»£c kiáº¿n trÃºc - cÃ¡c thÃ nh pháº§n cá»§a Kubernetes</h2><p>Há»‡ thá»‘ng Kubernetes tháº­t sá»± phá»©c táº¡p, cÃ¡c thÃ nh pháº§n cá»§a sáº½ Ä‘Æ°á»£c tÃ¬m hiá»ƒu dáº§n qua tá»«ng bÃ i viáº¿t, nhÆ°ng á»Ÿ Ä‘Ã¢y cÃ³ má»™t sÆ¡ Ä‘á»“ vÃ  má»™t vÃ i khÃ¡i quÃ¡t ban Ä‘áº§u vá» kiáº¿n trÃºc / thÃ nh pháº§n cá»§a nÃ³<br><img src="/post-images/kuber-overview/Screenshot_2.png" alt="alt"></p>
<p><strong>Master</strong> Server lÃ  mÃ¡y chÃ­nh cá»§a cluster, táº¡i Ä‘Ã¢y Ä‘iá»u khiá»ƒn cáº£ cá»¥m mÃ¡y. <br><strong>etct</strong> lÃ  thÃ nh pháº§n cÆ¡ báº£n cáº§n thiáº¿t cho Kubernetes, nÃ³ lÆ°u trá»¯ cÃ¡c cáº¥u hÃ¬nh chung cho cáº£ cá»¥m mÃ¡y, etct cháº¡y táº¡i mÃ¡y master. etct lÃ  má»™t dá»± Ã¡n nguá»“n má»Ÿ nÃ³ cung cáº¥p dá»‹ch vá»¥ lÆ°u dá»¯ liá»‡u theo cáº·p key/value.<br><strong>kube-apiserver</strong> cháº¡y táº¡i mÃ¡y master, cung cáº¥p cÃ¡c API Restful Ä‘á»ƒ cÃ¡c client (nhÆ° kubectl) tÆ°Æ¡ng tÃ¡c vá»›i Kubernetes.<br><strong>kube-scheduler</strong> cháº¡y táº¡i master, thÃ nh pháº§n nÃ y giÃºp lá»±a chá»n Node nÃ o Ä‘á»ƒ cháº¡y cÃ¡c á»©ng dá»¥ng cÄƒn cá»© vÃ o tÃ i nguyÃªn vÃ  cÃ¡c thÃ nh pháº§n khÃ¡c sao cho há»‡ thá»‘ng á»•n Ä‘á»‹nh.<br><strong>kube-controller</strong> cháº¡y táº¡i master, nÃ³ Ä‘iá»u khiá»ƒn tráº¡ng thÃ¡i cluster, tÆ°Æ¡ng tÃ¡c Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c tÃ¡c vá»¥ táº¡o, xÃ³a, cáº­p nháº­t â€¦ cÃ¡c tÃ i nguyÃªn.<br><strong>Kubelet</strong> dá»‹ch vá»¥ vá»¥ cháº¡y trÃªn táº¥t cáº£ cÃ¡c mÃ¡y (Node), nÃ³ Ä‘áº£m Ä‘Æ°Æ¡ng giÃ¡m sÃ¡t cháº¡y, dá»«ng, duy trÃ¬ cÃ¡c á»©ng dá»¥ng cháº¡y trÃªn node cá»§a nÃ³.<br><strong>Kube-proxy</strong> cung cáº¥p máº¡ng proxy Ä‘á»ƒ cÃ¡c á»©ng dá»¥ng nháº­n Ä‘Æ°á»£c traffic tá»« ngoÃ i máº¡ng vÃ o cluster.</p>
<h2 id="Cac-thong-tin-tom-tat-ve-Kubernetes"><a href="#Cac-thong-tin-tom-tat-ve-Kubernetes" class="headerlink" title="CÃ¡c thÃ´ng tin tÃ³m táº¯t vá» Kubernetes"></a>CÃ¡c thÃ´ng tin tÃ³m táº¯t vá» Kubernetes</h2><h3 id="Can-chuan-bi-gi-khi-tim-hieu-ve-Kubernetes"><a href="#Can-chuan-bi-gi-khi-tim-hieu-ve-Kubernetes" class="headerlink" title="Cáº§n chuáº©n bá»‹ gÃ¬ khi tÃ¬m hiá»ƒu vá» Kubernetes?"></a>Cáº§n chuáº©n bá»‹ gÃ¬ khi tÃ¬m hiá»ƒu vá» Kubernetes?</h3><ul>
<li>Cáº§n vá»«a Ä‘á»c khÃ¡i niá»‡m lÃ½ thuyáº¿t vá»«a thá»±c hÃ nh.</li>
<li>Äá»ƒ tÃ¬m hiá»ƒu tá»‘t vá» Kubernetes thÃ¬ cáº§n tÃ¬m hiá»ƒu vá» há»‡ sinh thÃ¡i container vÃ  docker á»Ÿ má»©c cá»Ÿ báº£n (cÃ³ nghÄ©a lÃ  cÃ i cáº¯m vÃ  thá»±c hÃ nh Ä‘Æ°á»£c vá»›i docker cÆ¡ báº£n).</li>
<li>Ká»¹ nÄƒng vÃ  kiáº¿n thá»©c tá»‘i quan trá»ng khi lÃ m viá»‡c vá»›i Kubernetes lÃ : Linux.</li>
<li>Ká»¹ nÄƒng bá»• trá»£ khÃ¡c: Network (TCP/IP), má»™t vÃ i ká»¹ nÄƒng cÃ i Ä‘áº·t cÃ¡c á»©ng dá»¥ng cÆ¡ báº£n nhÆ° web server, database.</li>
<li>TÃ i liá»‡u chuáº©n cá»§a Kubernetes táº¥t nhiÃªn lÃ  á»Ÿ trang chá»§ cá»§a há» <a href="https://kubernetes.io/" target="_blank" rel="noopener">https://kubernetes.io/</a>, ngoÃ i ra github nÃ y cÅ©ng coi nhÆ° lÃ  má»™t tham kháº£o tá»‘t.</li>
</ul>
<h3 id="Khi-nao-thi-can-dung-kubernetes"><a href="#Khi-nao-thi-can-dung-kubernetes" class="headerlink" title="Khi nÃ o thÃ¬ cáº§n dÃ¹ng kubernetes?"></a>Khi nÃ o thÃ¬ cáº§n dÃ¹ng kubernetes?</h3><ul>
<li>ThÃ­ch há»£p vá»›i cÃ¡c á»©ng dá»¥ng cÃ³ nhu cáº§u scale khi cÃ³ táº£i lá»›n (khi sá»‘ lÆ°á»£ng request tÄƒng lÃªn thÃ¬ cÃ¡c container Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi K8S sáº½ tá»± Ä‘á»™ng sinh ra hoáº·c khi 1 trong sá»‘ cÃ¡c container bá»‹ down thÃ¬ K8S tá»± Ä‘á»™ng biáº¿t vÃ  bá»• sung Ä‘á»ƒ thay tháº¿.</li>
<li>ThÃ­ch há»£p vá»›i nhá»¯ng á»©ng dá»¥ng cÃ³ kiáº¿n trÃºc microservice hay cloud native app..</li>
<li>CÃ¡c doanh nghiá»‡p lá»›n, cÃ³ nhu cáº§u thá»±c sá»± pháº£i scaling há»‡ thá»‘ng nhanh chÃ³ng, vÃ  Ä‘Ã£ sá»­ dá»¥ng container (Docker).</li>
<li>CÃ¡c dá»± Ã¡n cáº§n cháº¡y &gt;= 5 container CÃ™NG LOáº I cho 1 dá»‹ch vá»¥. (VÃ­ dá»¥ dÃ¹ng &gt;=5 mÃ¡y cÃ¹ng Ä‘á»ƒ cháº¡y code website XYZ). CÃ²n nhá» hÆ¡n thÃ¬ tá»‘t nháº¥t khÃ´ng dÃ¹ng - Ä‘á»«ng mang dao má»• trÃ¢u Ä‘i giáº¿t gÃ .</li>
<li>CÃ¡c startup hiá»‡n Ä‘áº¡i, chá»‹u Ä‘áº§u tÆ° vÃ o cÃ´ng nghá»‡, Ä‘á»ƒ nhá»¡ vá» sau cÃ³ to ra, thÃ¬ to ráº¥t dá»… ğŸ™„.</li>
<li>CÃ¡c sysadmin/DevOps muá»‘n tÄƒng lÆ°Æ¡ng, nháº£y viá»‡c, vá»c cÃ´ng nghá»‡ má»›i.</li>
</ul>
<h3 id="Kubernetes-co-the-lam-nhung-gi"><a href="#Kubernetes-co-the-lam-nhung-gi" class="headerlink" title="Kubernetes cÃ³ thá»ƒ lÃ m nhá»¯ng gÃ¬?"></a>Kubernetes cÃ³ thá»ƒ lÃ m nhá»¯ng gÃ¬?</h3><p>CÃ¡c container lÃ  má»™t cÃ¡ch tá»‘t Ä‘á»ƒ Ä‘Ã³ng gÃ³i vÃ  cháº¡y cÃ¡c á»©ng dá»¥ng cá»§a báº¡n. Trong mÃ´i trÆ°á»ng production, báº¡n cáº§n quáº£n lÃ½ cÃ¡c container cháº¡y cÃ¡c á»©ng dá»¥ng vÃ  Ä‘áº£m báº£o ráº±ng khÃ´ng cÃ³ khoáº£ng thá»i gian downtime. VÃ­ dá»¥, náº¿u má»™t container bá»‹ táº¯t Ä‘i, má»™t container khÃ¡c cáº§n pháº£i khá»Ÿi Ä‘á»™ng lÃªn. Äiá»u nÃ y sáº½ dá»… dÃ ng hÆ¡n náº¿u Ä‘Æ°á»£c xá»­ lÃ½ bá»Ÿi má»™t há»‡ thá»‘ng.</p>
<p>ÄÃ³ lÃ  cÃ¡ch Kubernetes Ä‘áº¿n vá»›i chÃºng ta. Kubernetes cung cáº¥p cho báº¡n má»™t framework Ä‘á»ƒ cháº¡y cÃ¡c há»‡ phÃ¢n tÃ¡n má»™t cÃ¡ch máº¡nh máº½. NÃ³ Ä‘áº£m nhiá»‡m viá»‡c nhÃ¢n rá»™ng vÃ  chuyá»ƒn Ä‘á»•i dá»± phÃ²ng cho á»©ng dá»¥ng cá»§a báº¡n, cung cáº¥p cÃ¡c máº«u deployment vÃ  hÆ¡n tháº¿ ná»¯a. VÃ­ dá»¥, Kubernetes cÃ³ thá»ƒ dá»… dÃ ng quáº£n lÃ½ má»™t triá»ƒn khai canary cho há»‡ thá»‘ng cá»§a báº¡n.</p>
<p>Kubernetes cung cáº¥p:</p>
<ul>
<li><p><strong>Service discovery vÃ  cÃ¢n báº±ng táº£i</strong><br>Kubernetes cÃ³ thá»ƒ expose má»™t container sá»­ dá»¥ng DNS hoáº·c Ä‘á»‹a chá»‰ IP cá»§a riÃªng nÃ³. Náº¿u lÆ°á»£ng traffic truy cáº­p Ä‘áº¿n má»™t container cao, Kubernetes cÃ³ thá»ƒ cÃ¢n báº±ng táº£i vÃ  phÃ¢n phá»‘i lÆ°u lÆ°á»£ng máº¡ng (network traffic) Ä‘á»ƒ viá»‡c triá»ƒn khai Ä‘Æ°á»£c á»•n Ä‘á»‹nh.</p>
</li>
<li><p><strong>Äiá»u phá»‘i bá»™ nhá»›</strong><br>Kubernetes cho phÃ©p báº¡n tá»± Ä‘á»™ng mount má»™t há»‡ thá»‘ng lÆ°u trá»¯ mÃ  báº¡n chá»n, nhÆ° local storages, public cloud providers, v.v.</p>
</li>
<li><p><strong>Tá»± Ä‘á»™ng rollouts vÃ  rollbacks</strong><br>Báº¡n cÃ³ thá»ƒ mÃ´ táº£ tráº¡ng thÃ¡i mong muá»‘n cho cÃ¡c container Ä‘Æ°á»£c triá»ƒn khai dÃ¹ng Kubernetes vÃ  nÃ³ cÃ³ thá»ƒ thay Ä‘á»•i tráº¡ng thÃ¡i thá»±c táº¿ sang tráº¡ng thÃ¡i mong muá»‘n vá»›i táº§n suáº¥t Ä‘Æ°á»£c kiá»ƒm soÃ¡t. VÃ­ dá»¥, báº¡n cÃ³ thá»ƒ tá»± Ä‘á»™ng hoÃ¡ Kubernetes Ä‘á»ƒ táº¡o má»›i cÃ¡c container cho viá»‡c triá»ƒn khai cá»§a báº¡n, xoÃ¡ cÃ¡c container hiá»‡n cÃ³ vÃ  Ã¡p dá»¥ng táº¥t cáº£ cÃ¡c resource cá»§a chÃºng vÃ o container má»›i.</p>
</li>
<li><p><strong>ÄÃ³ng gÃ³i tá»± Ä‘á»™ng</strong><br>Báº¡n cung cáº¥p cho Kubernetes má»™t cluster gá»“m cÃ¡c node mÃ  nÃ³ cÃ³ thá»ƒ sá»­ dá»¥ng Ä‘á»ƒ cháº¡y cÃ¡c tÃ¡c vá»¥ Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i (containerized task). Báº¡n cho Kubernetes biáº¿t má»—i container cáº§n bao nhiÃªu CPU vÃ  bá»™ nhá»› (RAM). Kubernetes cÃ³ thá»ƒ Ä‘iá»u phá»‘i cÃ¡c container Ä‘áº¿n cÃ¡c node Ä‘á»ƒ táº­n dá»¥ng tá»‘t nháº¥t cÃ¡c resource cá»§a báº¡n.</p>
</li>
<li><p><strong>Tá»± phá»¥c há»“i</strong><br>Kubernetes khá»Ÿi Ä‘á»™ng láº¡i cÃ¡c containers bá»‹ lá»—i, thay tháº¿ cÃ¡c container, xoÃ¡ cÃ¡c container khÃ´ng pháº£n há»“i láº¡i cáº¥u hÃ¬nh health check do ngÆ°á»i dÃ¹ng xÃ¡c Ä‘á»‹nh vÃ  khÃ´ng cho cÃ¡c client biáº¿t Ä‘áº¿n chÃºng cho Ä‘áº¿n khi chÃºng sáºµn sÃ ng hoáº¡t Ä‘á»™ng.</p>
</li>
<li><p><strong>Quáº£n lÃ½ cáº¥u hÃ¬nh vÃ  báº£o máº­t</strong><br>Kubernetes cho phÃ©p báº¡n lÆ°u trá»¯ vÃ  quáº£n lÃ½ cÃ¡c thÃ´ng tin nháº¡y cáº£m nhÆ°: password, OAuth token vÃ  SSH key. Báº¡n cÃ³ thá»ƒ triá»ƒn khai vÃ  cáº­p nháº­t láº¡i secret vÃ  cáº¥u hÃ¬nh á»©ng dá»¥ng mÃ  khÃ´ng cáº§n build láº¡i cÃ¡c container image vÃ  khÃ´ng Ä‘á»ƒ lá»™ secret trong cáº¥u hÃ¬nh stack cá»§a báº¡n.</p>
</li>
</ul>
<h3 id="Cac-san-pham-dua-tren-Kubernetes"><a href="#Cac-san-pham-dua-tren-Kubernetes" class="headerlink" title="CÃ¡c sáº£n pháº©m dá»±a trÃªn Kubernetes"></a>CÃ¡c sáº£n pháº©m dá»±a trÃªn Kubernetes</h3><ul>
<li><strong>RedHat Openshift 3</strong>: <a href="https://www.openshift.org/" target="_blank" rel="noopener">https://www.openshift.org/</a></li>
<li><strong>Deis Workflow</strong> - opensource platform as a service (PaaS): <a href="https://deis.com/paas/" target="_blank" rel="noopener">https://deis.com/paas/</a></li>
<li><strong>Rancher</strong> - container management platform: <a href="http://rancher.com/rancher/" target="_blank" rel="noopener">http://rancher.com/rancher/</a></li>
</ul>
<h3 id="Cac-cach-de-cai-dat-K8s"><a href="#Cac-cach-de-cai-dat-K8s" class="headerlink" title="CÃ¡c cÃ¡ch Ä‘á»ƒ cÃ i Ä‘áº·t K8s"></a>CÃ¡c cÃ¡ch Ä‘á»ƒ cÃ i Ä‘áº·t K8s</h3><ul>
<li><a href="https://kubernetes.io/docs/getting-started-guides/minikube/" target="_blank" rel="noopener"><strong>Minikube</strong></a> Ä‘á»ƒ cÃ i 1 cluster test chÆ¡i chÆ¡i trÃªn mÃ¡y cá»§a báº¡n</li>
<li><a href="https://kubernetes.io/docs/getting-started-guides/kubeadm/" target="_blank" rel="noopener"><strong>Kubeadm</strong></a> Ä‘ang trong giai Ä‘oáº¡n phÃ¡t triá»ƒn, Ä‘á»ƒ cÃ i trÃªn há»‡ thá»‘ng mÃ¡y váº­t lÃ½ / mÃ¡y áº£o dÃ¹ng Ubuntu 16.04 hay CentOS 7</li>
<li><a href="https://github.com/kubernetes-incubator/kargo/" target="_blank" rel="noopener"><strong>Kargo</strong></a> lÃ  pháº§n má»m dá»±a trÃªn Ansible Ä‘á»ƒ cÃ i trÃªn ráº¥t nhiá»u nÆ¡i bao gá»“m cáº£ mÃ¡y váº­t lÃ½/mÃ¡y áº£o/AWS/GCE</li>
<li>VÃ  ráº¥t nhiá»u cÃ¡c giáº£i phÃ¡p khÃ¡c ná»¯a xem <a href="https://kubernetes.io/docs/getting-started-guides/" target="_blank" rel="noopener"><strong>táº¡i Ä‘Ã¢y</strong></a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>Install Ubuntu Server 16.04 LTS</title>
    <url>/2020/06/25/in-ubun-ser-16.04/</url>
    <content><![CDATA[<p>Welcome to <a href="https://thanhbangoc.github.io/" target="_blank" rel="noopener">Thanhâ€™s Blogs</a>! This is my post for Install Ubuntu Server 16.04 LTS . Check document bellow for more info. If you get any problems when using document, you can find the answer in <a href="https://www.linkedin.com/in/thanhbangoc/" target="_blank" rel="noopener">Linkedin</a> or you can ask me on <a href="mailto:thanhbangoc@gmail.com">Email</a>.</p>
<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>Ubuntu Server is Ubuntu tailored for networks and services, and itâ€™s just as capable sharing files on your home network as it is running within a Hadoop cluster.</p>
<p>Unlike the installation of Ubuntu Desktop, Ubuntu Server does not include a graphical installation program. Instead, it uses a console menu-based process. If youâ€™d rather install the desktop version, take a look at our Install Ubuntu desktop tutorial.</p>
<p>This guide will provide an overview of the installation from either a DVD or a USB flash drive, suitable for anyone with an interest in running their own server. For a more detailed guide on Ubuntu Serverâ€™s capabilities and its configuration, take a look at our Ubuntu Server help documentation.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Prepare"><a href="#Prepare" class="headerlink" title="Prepare"></a>Prepare</h3><p>You can visit the following link to download the ISO file to install Ubuntu Server: <a href="https://www.ubuntu.com/download/server" target="_blank" rel="noopener">LTS</a> or <a href="https://releases.ubuntu.com/16.04/" target="_blank" rel="noopener">16.04</a> and choose download image you want !<br><img src="/post-images/install-ubuntu-server-16.04/Screenshot_1.png" alt="alt"><br>Once the image download completes, burn it to a CD or create a bootable USB disk using Unbootin (for BIOS machines) or Rufus (for UEFI machines).</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-install"><a href="#Run-install" class="headerlink" title="Run install"></a>Run install</h3><p>Place the bootable media intro the appropriate drive, start-up the machine and instruct the BIOS/UEFI by pressing a special function key (F2, F11, F12) to boot-up from the inserted USB/CD drive.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>Create cluster Kubernetes with Vagrant Centos/7 - Vietnamese</title>
    <url>/2020/06/26/create-cluster-centos/</url>
    <content><![CDATA[<p>Welcome to <a href="https://thanhbangoc.github.io/" target="_blank" rel="noopener">Thanhâ€™s Blogs</a>! This is my post for Create cluster Kubernetes with Vagrant Centos/7 . Check document bellow for more info. If you get any problems when using document, you can find the answer in <a href="https://www.linkedin.com/in/thanhbangoc/" target="_blank" rel="noopener">Linkedin</a> or you can ask me on <a href="mailto:thanhbangoc@gmail.com">Email</a>.</p>
<h2 id="Tong-quan"><a href="#Tong-quan" class="headerlink" title="Tá»•ng quan"></a>Tá»•ng quan</h2><p>Cluster cÃ³ nghÄ©a lÃ  cá»¥m, váº­y Kubernetes Cluster cÃ³ nghÄ©a lÃ  cá»¥m cÃ¡c mÃ¡y cháº¡y docker cÃ³ pháº£i váº­y khÃ´ng? khÃ´ng Ä‘Æ¡n giáº£n tháº¿ Ä‘Ã¢u, nhÆ°ng trÆ°á»›c tiÃªn cá»© hÃ£y xem nhÆ° váº­y Ä‘Ã£.<br>Má»™t cluster lÃ  má»™t táº­p cÃ¡c mÃ¡y váº­t lÃ½ hay mÃ¡y áº£o Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi Kubernetes Ä‘á»ƒ cháº¡y cÃ¡c á»©ng dá»¥ng.<br>Kubernetes Cluster bao gá»“m Nodes(master) vÃ  Nodes(worker).<br><img src="/post-images/cre-clu-centos7/Screenshot_1.png" alt="alt"></p>
<h2 id="Vagrant"><a href="#Vagrant" class="headerlink" title="Vagrant"></a>Vagrant</h2><p>Vagrant lÃ m viá»‡c vá»›i má»™t ná»n táº£ng áº£o hÃ³a nÃ o Ä‘Ã³ nhÆ° VirtualBox, HyperV, VM â€¦ nÃªn báº¡n cÅ©ng cáº§n cÃ³ trÃªn há»‡ thá»‘ng cá»§a mÃ¬nh, vÃ­ dá»¥ cáº§n cÃ i Ä‘áº·t VirtualBox náº¿u dÃ¹ng ná»n táº£ng nÃ y, á»Ÿ pháº§n nÃ y coi nhÆ° báº¡n Ä‘Ã£ Ä‘ang cÃ³ VirtualBox hay HyperV trÃªn há»‡ thá»‘ng.</p>
<h3 id="Cai-dat-vagrant"><a href="#Cai-dat-vagrant" class="headerlink" title="CÃ i Ä‘áº·t vagrant"></a>CÃ i Ä‘áº·t vagrant</h3><h4 id="tren-Windows-macOS"><a href="#tren-Windows-macOS" class="headerlink" title="trÃªn Windows / macOS"></a>trÃªn Windows / macOS</h4><p>Táº£i Vagrant Ä‘Ãºng báº£n dÃ nh cho Windows (32 hay 64bit) hay macOS táº¡i <a href="https://www.vagrantup.com/downloads.html" target="_blank" rel="noopener">Táº£i Vagrant</a>, sau Ä‘Ã³ cháº¡y bá»™ cÃ i Ä‘áº·t, cÃ³ thá»ƒ cáº§n khá»Ÿi Ä‘á»™ng láº¡i mÃ¡y.<br>TrÃªn Windows cÃ³ thá»ƒ dÃ¹ng PowerShell hoáº·c náº¿u muá»‘n cÃ i GitBash Ä‘á»ƒ cÃ³ mÃ´i trÆ°á»ng dÃ²ng lá»‡nh tÆ°Æ¡ng tÃ¡c vá»›i Vagrant. Sau Ä‘Ã³ cháº¡y lá»‡nh Ä‘á»ƒ kiá»ƒm tra vagarant Ä‘ang cÃ³ trÃªn há»‡ thá»‘ng:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vagrant version</span><br></pre></td></tr></table></figure>

<h4 id="tren-Ubuntu"><a href="#tren-Ubuntu" class="headerlink" title="trÃªn Ubuntu"></a>trÃªn Ubuntu</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo apt-get install vagrant</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vagrant version</span><br></pre></td></tr></table></figure>

<h2 id="Tao-Cluster-Kubernetes-hoan-chinh"><a href="#Tao-Cluster-Kubernetes-hoan-chinh" class="headerlink" title="Táº¡o Cluster Kubernetes hoÃ n chá»‰nh"></a>Táº¡o Cluster Kubernetes hoÃ n chá»‰nh</h2><p>Pháº§n nÃ y sáº½ táº¡o ra má»™t Cluster Kubernetes hoÃ n chá»‰nh tá»« 3 mÃ¡y (3 VPS - hay 3 Server) cháº¡y CentOS, báº¡n cÃ³ thá»ƒ dÃ¹ng cÃ¡ch nÃ y khi triá»ƒn khai mÃ´i trÆ°á»ng product. Há»‡ thá»‘ng nÃ y gá»“m:</p>
<table>
<thead>
<tr>
<th>TÃªn mÃ¡y</th>
<th align="center">ThÃ´ng tin</th>
<th align="right">Vai trÃ²</th>
</tr>
</thead>
<tbody><tr>
<td>k8s-master.xtl</td>
<td align="center">HÄH CentOS7, Docker CE, Kubernetes. Äá»‹a chá»‰ IP 192.168.10.100</td>
<td align="right">Khá»Ÿi táº¡o lÃ  master</td>
</tr>
<tr>
<td>k8s-worker1.xtl</td>
<td align="center">HÄH CentOS7, Docker CE, Kubernetes. Äá»‹a chá»‰ IP 192.168.10.101</td>
<td align="right">Khá»Ÿi táº¡o lÃ  worker</td>
</tr>
<tr>
<td>k8s-worker1.xtl</td>
<td align="center">HÄH CentOS7, Docker CE, Kubernetes. Äá»‹a chá»‰ IP 192.168.10.102</td>
<td align="right">Khá»Ÿi táº¡o lÃ  worker</td>
</tr>
</tbody></table>
<h3 id="Tao-node-Master-Kubernetes"><a href="#Tao-node-Master-Kubernetes" class="headerlink" title="Táº¡o node Master Kubernetes"></a>Táº¡o node Master Kubernetes</h3><p><strong>STEP1</strong>: Táº¡o file config chá»©a thÃ´ng tin node master: kubernetes-centos7/master/Vagrantfile</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- mode: ruby -*-</span></span><br><span class="line"><span class="comment"># vi: set ft=ruby :</span></span><br><span class="line"></span><br><span class="line">Vagrant.configure(<span class="string">"2"</span>) <span class="keyword">do</span> |config|</span><br><span class="line">config.vm.box = <span class="string">"centos/7"</span></span><br><span class="line">config.vm.network <span class="string">"private_network"</span>, ip: <span class="string">"192.168.10.100"</span></span><br><span class="line">config.vm.hostname = <span class="string">"k8s-master.xtl"</span></span><br><span class="line"></span><br><span class="line">config.vm.provider <span class="string">"virtualbox"</span> <span class="keyword">do</span> |vb|</span><br><span class="line">    vb.name = <span class="string">"k8s-master.xtl"</span></span><br><span class="line">    vb.cpus = 2</span><br><span class="line">    vb.memory = <span class="string">"2048"</span></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">config.vm.provision <span class="string">"shell"</span>, path: <span class="string">"./../install-docker-kube.sh"</span></span><br><span class="line"></span><br><span class="line">config.vm.provision <span class="string">"shell"</span>, inline: &lt;&lt;-SHELL</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"root password"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"123"</span> | passwd --stdin root</span><br><span class="line">    sed -i <span class="string">'s/^PasswordAuthentication no/PasswordAuthentication yes/'</span> /etc/ssh/sshd_config</span><br><span class="line">    systemctl reload sshd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cat &gt;&gt;/etc/hosts&lt;&lt;EOF</span><br><span class="line">192.168.10.100 k8s-master.xtl</span><br><span class="line">192.168.10.101 k8s-worker1.xtl</span><br><span class="line">192.168.10.102 k8s-worker2.xtl</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">SHELL</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p>TÆ°Æ¡ng tá»± táº¡o cho cÃ¡c node worker1: kubernetes-centos7/woker1/Vagrantfile. Worker2 lÃ m tÆ°Æ¡ng tá»±:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- mode: ruby -*-</span></span><br><span class="line"><span class="comment"># vi: set ft=ruby :</span></span><br><span class="line"></span><br><span class="line">Vagrant.configure(<span class="string">"2"</span>) <span class="keyword">do</span> |config|</span><br><span class="line">config.vm.box = <span class="string">"centos/7"</span></span><br><span class="line">config.vm.network <span class="string">"private_network"</span>, ip: <span class="string">"192.168.10.101"</span></span><br><span class="line">config.vm.hostname = <span class="string">"k8s-worker1.xtl"</span></span><br><span class="line"></span><br><span class="line">config.vm.provider <span class="string">"virtualbox"</span> <span class="keyword">do</span> |vb|</span><br><span class="line">    vb.name = <span class="string">"k8s-worker1.xtl"</span></span><br><span class="line">    vb.cpus = 1</span><br><span class="line">    vb.memory = <span class="string">"1024"</span></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">config.vm.provision <span class="string">"shell"</span>, path: <span class="string">"./../install-docker-kube.sh"</span></span><br><span class="line"></span><br><span class="line">config.vm.provision <span class="string">"shell"</span>, inline: &lt;&lt;-SHELL</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"root password"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"123"</span> | passwd --stdin root</span><br><span class="line">    sed -i <span class="string">'s/^PasswordAuthentication no/PasswordAuthentication yes/'</span> /etc/ssh/sshd_config</span><br><span class="line">    systemctl reload sshd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cat &gt;&gt;/etc/hosts&lt;&lt;EOF</span><br><span class="line">192.168.10.100 k8s-master.xtl</span><br><span class="line">192.168.10.101 k8s-worker1.xtl</span><br><span class="line">192.168.10.102 k8s-worker2.xtl</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">SHELL</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p><strong>STEP2</strong>: Táº¡o file script install mÃ´i trÆ°á»ng docker vÃ  kube cho nhá»¯ng node nÃ y: kubernetes-centos7/install-docker-kube.sh</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Cáº­p nháº­t 12/2019</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Cai dat Docker</span></span><br><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line">yum update -y &amp;&amp; yum install docker-ce-18.06.2.ce -y</span><br><span class="line">usermod -aG docker $(whoami)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Create /etc/docker directory.</span></span><br><span class="line">mkdir /etc/docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># Setup daemon.</span></span><br><span class="line">cat &gt; /etc/docker/daemon.json &lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"exec-opts"</span>: [<span class="string">"native.cgroupdriver=systemd"</span>],</span><br><span class="line">  <span class="string">"log-driver"</span>: <span class="string">"json-file"</span>,</span><br><span class="line">  <span class="string">"log-opts"</span>: &#123;</span><br><span class="line">    <span class="string">"max-size"</span>: <span class="string">"100m"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"storage-driver"</span>: <span class="string">"overlay2"</span>,</span><br><span class="line">  <span class="string">"storage-opts"</span>: [</span><br><span class="line">    <span class="string">"overlay2.override_kernel_check=true"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">mkdir -p /etc/systemd/system/docker.service.d</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Restart Docker</span></span><br><span class="line">systemctl <span class="built_in">enable</span> docker.service</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Tat SELinux</span></span><br><span class="line">setenforce 0</span><br><span class="line">sed -i --follow-symlinks <span class="string">'s/^SELINUX=enforcing/SELINUX=disabled/'</span> /etc/sysconfig/selinux</span><br><span class="line"></span><br><span class="line"><span class="comment"># Tat Firewall</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">systemctl stop firewalld</span><br><span class="line"></span><br><span class="line"><span class="comment"># sysctl</span></span><br><span class="line">cat &gt;&gt;/etc/sysctl.d/kubernetes.conf&lt;&lt;EOF</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 1</span><br><span class="line">EOF</span><br><span class="line">sysctl --system &gt;/dev/null 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line"><span class="comment"># Tat swap</span></span><br><span class="line">sed -i <span class="string">'/swap/d'</span> /etc/fstab</span><br><span class="line">swapoff -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add yum repo file for Kubernetes</span></span><br><span class="line">cat &gt;&gt;/etc/yum.repos.d/kubernetes.repo&lt;&lt;EOF</span><br><span class="line">[kubernetes]</span><br><span class="line">name=Kubernetes</span><br><span class="line">baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">repo_gpgcheck=1</span><br><span class="line">gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">yum install -y -q kubeadm kubelet kubectl</span><br><span class="line"></span><br><span class="line">systemctl <span class="built_in">enable</span> kubelet</span><br><span class="line">systemctl start kubelet</span><br><span class="line"></span><br><span class="line"><span class="comment"># Configure NetworkManager before attempting to use Calico networking.</span></span><br><span class="line">cat &gt;&gt;/etc/NetworkManager/conf.d/calico.conf&lt;&lt;EOF</span><br><span class="line">[keyfile]</span><br><span class="line">unmanaged-devices=interface-name:cali*;interface-name:tunl*</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p>Thiáº¿t láº­p phÃ¢n quyá»n cho file script</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">chmode +x install-docker-kube.sh</span><br></pre></td></tr></table></figure>

<p><strong>STEP3</strong>: Khá»Ÿi táº¡o cÃ¡c node.<br>Táº¡i thÆ° má»¥c kubernetes-centos7/master/ gÃµ lá»‡nh vagrant Ä‘á»ƒ táº¡o mÃ¡y k8s-master.xtl.<br>Táº¡i thÆ° má»¥c kubernetes-centos7/worker1/ gÃµ lá»‡nh vagrant Ä‘á»ƒ táº¡o mÃ¡y k8s-master.xtl.<br>Táº¡i thÆ° má»¥c kubernetes-centos7/woker2/ gÃµ lá»‡nh vagrant Ä‘á»ƒ táº¡o mÃ¡y k8s-master.xtl.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vagrant up</span><br></pre></td></tr></table></figure>

<p><em>Sau lá»‡nh nÃ y, quÃ¡ trÃ¬nh cÃ i Ä‘áº·t diá»…n ra, káº¿t thÃºc thÃ¬ cÃ³ mÃ¡y áº£o VirtualBox vá»›i tÃªn k8s-master.xtl, k8s-worker1 vÃ  k8s-worker2 trong Ä‘Ã³ Ä‘Ã£ cÃ³ Docker, kubelet Ä‘ang cháº¡y láº§n lÆ°á»£t á»Ÿ cÃ¡c Ä‘á»‹a chá»‰ IP 192.168.10.100, 192.168.10.101 vÃ  192.168.10.102. HÃ£y ssh vÃ o mÃ¡y nÃ y báº±ng lá»‡nh ssh vá»›i tÃ i khoáº£n root cÃ³ cáº¥u hÃ¬nh pass lÃ  123 á»Ÿ trÃªn.</em></p>
<h3 id="Tao-cluster-o-node-master"><a href="#Tao-cluster-o-node-master" class="headerlink" title="Táº¡o cluster á»Ÿ node master"></a>Táº¡o cluster á»Ÿ node master</h3><p>Trong lá»‡nh khá»Ÿi táº¡o cluster cÃ³ tham sá»‘ â€“pod-network-cidr Ä‘á»ƒ chá»n cáº¥u hÃ¬nh máº¡ng cá»§a POD, do dá»± Ä‘á»‹nh dÃ¹ng Addon flanet nÃªn chá»n â€“pod-network-cidr=10.244.0.0/16.<br>ssh vÃ o mÃ¡y k8s-master.xtl</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh root@192.168.10.100</span><br></pre></td></tr></table></figure>
<p>Khá»Ÿi táº¡o cluster</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubeadm init --apiserver-advertise-address=172.16.10.100 --pod-network-cidr=10.244.0.0/16</span><br></pre></td></tr></table></figure>
<p>Sau khi lá»‡nh cháº¡y xong, cháº¡y tiáº¿p cá»¥m lá»‡nh nÃ³ yÃªu cáº§u cháº¡y sau khi khá»Ÿi táº¡o- Ä‘á»ƒ chÃ©p file cáº¥u hÃ¬nh Ä‘áº£m báº£o trÃ¬nh kubectl trÃªn mÃ¡y nÃ y káº¿t ná»‘i Cluster</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) <span class="variable">$HOME</span>/.kube/config</span><br></pre></td></tr></table></figure>
<p>YÃªu cáº§u cÃ i Ä‘áº·t má»™t Plugin máº¡ng trong cÃ¡c Plugin táº¡i addon, á»Ÿ Ä‘Ã¢y Ä‘Ã£ chá»n flanet, nÃªn cháº¡y lá»‡nh sau Ä‘á»ƒ cÃ i nÃ³</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span><br></pre></td></tr></table></figure>
<p>GÃµ vÃ i lá»‡nh sau Ä‘á»ƒ kiá»ƒm tra</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ThÃ´ng tin cluster</span></span><br><span class="line">kubectl cluster-info</span><br><span class="line"><span class="comment"># CÃ¡c node trong cluster</span></span><br><span class="line">kubectl get nodes</span><br><span class="line"><span class="comment"># CÃ¡c pod Ä‘ang cháº¡y trong táº¥t cáº£ cÃ¡c namespace</span></span><br><span class="line">kubectl get pods -A</span><br></pre></td></tr></table></figure>

<h3 id="Cau-hinh-kubectl-may-host-truy-cap-den-cac-Cluster-tu-xa"><a href="#Cau-hinh-kubectl-may-host-truy-cap-den-cac-Cluster-tu-xa" class="headerlink" title="Cáº¥u hÃ¬nh kubectl mÃ¡y host truy cáº­p Ä‘áº¿n cÃ¡c Cluster tá»« xa"></a>Cáº¥u hÃ¬nh kubectl mÃ¡y host truy cáº­p Ä‘áº¿n cÃ¡c Cluster tá»« xa</h3><p>Trá»Ÿ láº¡i mÃ¡y Host, Ä‘á»ƒ xem ná»™i dung cáº¥u hÃ¬nh kubectl gÃµ lá»‡nh</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl config view</span><br></pre></td></tr></table></figure>

<p>Khi thi hÃ nh kubectl, thÃ¬ nÃ³ Ä‘á»c file cáº¥u hÃ¬nh á»Ÿ Ä‘Æ°á»ng dáº«n $HOME/.kube/config Ä‘á»ƒ biáº¿t cÃ¡c thÃ´ng sá»‘ Ä‘á»ƒ káº¿t ná»‘i Ä‘áº¿n Cluster. ($HOME lÃ  thÆ° má»¥c gá»‘c dÃ nh cho user Ä‘ang cháº¡y, Ä‘á»ƒ biáº¿t chÃ­nh xÃ¡c gÃµ lá»‡nh echo $HOME) - tÃ i khoáº£n root thÃ¬ Ä‘Ã³ lÃ  /root/.kube/config</p>
<p>Táº¡i mÃ¡y master á»Ÿ trÃªn, cÃ³ file cáº¥u hÃ¬nh cho táº¡i /root/.kube/config, ta copy file cáº¥u hÃ¬nh nÃ y ra lÆ°u thÃ nh file config-mycluster (<em>khÃ´ng ghi Ä‘Ã¨ vÃ o config hiá»‡n táº¡i cá»§a mÃ¡y HOST</em>)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">scp root@192.168.10.100:/etc/kubernetes/admin.conf ~/.kube/config-mycluster</span><br></pre></td></tr></table></figure>
<p>Giá» báº¡n sáº½ thá»±c hiá»‡n káº¿t há»£p 2 file: config vÃ  config-mycluster thÃ nh 1 vÃ  lÆ°u trá»Ÿ láº¡i config.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> KUBECONFIG=~/.kube/config:~/.kube/config-mycluster</span><br><span class="line">kubectl config view --flatten &gt; ~/.kube/config_temp</span><br><span class="line">mv ~/.kube/config_temp ~/.kube/config</span><br></pre></td></tr></table></figure>
<p>Thá»±c hiá»‡n lá»‡nh sau Ä‘á»ƒ get cÃ¡c contexts:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl config get-contexts</span><br></pre></td></tr></table></figure>
<p><img src="/post-images/cre-clu-centos7/Screenshot_2.png" alt="alt"><br>KÃ½ hiá»‡u * lÃ  cho biáº¿t context hiá»‡n táº¡i, náº¿u muá»‘n chuyá»ƒn lÃ m viá»‡c sang context cÃ³ tÃªn kubernetes-admin@kubernetes (ná»‘i vá»›i cluster má»›i táº¡o á»Ÿ trÃªn) thÃ¬ gÃµ lá»‡nh</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl config use-context kubernetes-admin@kubernetes</span><br></pre></td></tr></table></figure>

<h3 id="Ket-noi-Node-vao-Cluster"><a href="#Ket-noi-Node-vao-Cluster" class="headerlink" title="Káº¿t ná»‘i Node vÃ o Cluster"></a>Káº¿t ná»‘i Node vÃ o Cluster</h3><p>HÃ£y vÃ o mÃ¡y node master (báº±ng SSH ssh <a href="mailto:root@172.16.10.100">root@172.16.10.100</a>). Thá»±c hiá»‡n lá»‡nh sau vá»›i Cluster Ä‘á»ƒ láº¥y lá»‡nh káº¿t ná»‘i</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubeadm token create --<span class="built_in">print</span>-join-command</span><br></pre></td></tr></table></figure>
<p>Sau Ä‘Ã³ vÃ o láº§n lÆ°á»£t cÃ¡c mÃ¡y node worker1 vÃ  worker2 (báº±ng SSH ssh <a href="mailto:root@172.16.10.101">root@172.16.10.101</a> vÃ  ssh <a href="mailto:root@172.16.10.102">root@172.16.10.102</a>). Copy káº¿t quáº£ tráº£ vá» tá»« lá»‡nh trÆ°á»›c vÃ  cháº¡y trÃªn terminal Ä‘á»ƒ káº¿t ná»‘i.\</p>
<p>Sau Ä‘Ã³ kiá»ƒm tra cÃ¡c node Ä‘Ã£ Ä‘Æ°á»£c káº¿t ná»‘i trong cluster báº±ng lá»‡nh sau</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl get nodes</span><br></pre></td></tr></table></figure>
]]></content>
  </entry>
  <entry>
    <title>Cannot SSH into Server</title>
    <url>/2020/06/25/cannot-ssh-ser/</url>
    <content><![CDATA[<p>Welcome to <a href="https://thanhbangoc.github.io/" target="_blank" rel="noopener">Thanhâ€™s Blogs</a>! This is my post for Cannot SSH into Server . Check document bellow for more info. If you get any problems when using document, you can find the answer in <a href="https://www.linkedin.com/in/thanhbangoc/" target="_blank" rel="noopener">Linkedin</a> or you can ask me on <a href="mailto:thanhbangoc@gmail.com">Email</a>.</p>
<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>Secure Shell (SSH) is a cryptographic network protocol used for a secure connection between a client and a server.</p>
<p>In this tutorial, weâ€™ll show you how to enable SSH on an Ubuntu Desktop machine. Enabling SSH will allow you to remotely connect to your Ubuntu machine and securely transfer files or perform administrative tasks.</p>
<h2 id="Enabling-SSH-on-Ubuntu"><a href="#Enabling-SSH-on-Ubuntu" class="headerlink" title="Enabling SSH on Ubuntu"></a>Enabling SSH on Ubuntu</h2><h3 id="install-the-openssh-server-package"><a href="#install-the-openssh-server-package" class="headerlink" title="install the openssh-server package"></a>install the openssh-server package</h3><p>Open your terminal either by using the Ctrl+Alt+T keyboard shortcut or by clicking on the terminal icon and install the openssh-server package by typing.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install openssh-server</span><br></pre></td></tr></table></figure>
<p>Enter the password when prompted and enter <strong>Y</strong> to continue with the installation</p>
<p>To verify that the installation was successful and SSH service is running</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl status ssh</span><br></pre></td></tr></table></figure>

<h3 id="Config-firewall-and-and-open-port-22"><a href="#Config-firewall-and-and-open-port-22" class="headerlink" title="Config firewall and and open port 22"></a>Config firewall and and open port 22</h3><p>If the firewall is enabled on your system, make sure to open the SSH port:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo ufw allow ssh</span><br><span class="line">sudo ufw <span class="built_in">enable</span></span><br><span class="line">sudo ufw status</span><br></pre></td></tr></table></figure>
<p>Now that SSH is installed and running on your Ubuntu system you can connect to it via SSH from any remote machine.</p>
<h3 id="Connecting-to-SSH-Over-LAN"><a href="#Connecting-to-SSH-Over-LAN" class="headerlink" title="Connecting to SSH Over LAN"></a>Connecting to SSH Over LAN</h3><p>To connect to your Ubuntu machine over LAN you only need to enter the following command</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh username@ip_address</span><br></pre></td></tr></table></figure>
<p>If you donâ€™t know your IP address you can easily find it using the ip command</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ip a</span><br></pre></td></tr></table></figure>
]]></content>
  </entry>
</search>
